basePath: /v2/dns
definitions:
  api.AssignIpAddressParams:
    properties:
      cidr:
        example: 10.0.1.0/24
        type: string
      hostname:
        example: server-001
        type: string
      mac:
        example: "00:11:22:33:44:55"
        type: string
      network_id:
        example: 12345
        type: integer
      properties:
        example: department=IT|environment=prod
        type: string
      reverse:
        example: true
        type: boolean
    type: object
  api.CreateRecordParams:
    properties:
      properties:
        example: department=IT|environment=prod
        type: string
      record:
        example: server-001.yale.edu
        type: string
      target:
        example: 10.0.1.15
        type: string
      ttl:
        example: 300
        type: integer
      type:
        example: HostRecord
        type: string
    type: object
  api.MacParams:
    properties:
      mac:
        example: "00:11:22:33:44:55"
        type: string
      macpool:
        example: 12345
        type: integer
      properties:
        example: department=IT|environment=prod
        type: string
    type: object
  api.apiVersion:
    properties:
      buildstamp:
        description: The build timestamp of the API
        type: string
      githash:
        description: The git hash of the API
        type: string
      version:
        description: The version of the API
        type: string
    type: object
  models.Entity:
    properties:
      id:
        example: 12345
        type: integer
      name:
        type: string
      properties:
        additionalProperties:
          type: string
        example:
          address: 10.0.1.15|ttl:3600
        type: object
      type:
        example: HostRecord
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: cloudeng@yale.edu
    name: API Support
    url: https://yale.service-now.com/
  description: REST API for managing DNS records, IP addresses, and network resources.
    This service acts as an intermediary between Spinup and BlueCat's DNS/DHCP/IPAM
    system.
  license:
    name: GNU Affero General Public License v3.0
    url: https://www.gnu.org/licenses/agpl-3.0.html
  termsOfService: https://yaleits.atlassian.net/wiki/spaces/CSSD/pages/1625129002/Shared+Security+Responsibility+Model+for+AWS+Access
  title: Spinup â€“ DNS API
  version: 1.0.0
paths:
  /:
    get:
      description: Returns the BlueCat account configured for this DNS API instance
      produces:
      - application/json
      responses:
        "200":
          description: List containing the configured account name
          schema:
            items:
              type: string
            type: array
      summary: Get account information
      tags:
      - General
  /{account}/id/{id}:
    delete:
      description: Permanently deletes an entity from BlueCat. Only certain entity
        types can be deleted
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Entity ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "204":
          description: Entity deleted successfully
        "400":
          description: Invalid request parameters
        "403":
          description: Delete operation not allowed
        "404":
          description: Entity not found
        "500":
          description: Internal server error
      summary: Delete entity by ID
      tags:
      - Entity Management
    get:
      description: Retrieves detailed information about a specific entity using its
        unique identifier
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Entity ID
        in: path
        name: id
        required: true
        type: integer
      - default: true
        description: Include high availability information
        in: query
        name: includeHA
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Entity details
          schema:
            $ref: '#/definitions/models.Entity'
      summary: Get entity by ID
      tags:
      - Entity Management
  /{account}/ips:
    post:
      consumes:
      - application/json
      description: Assigns the next available IPv4 address in the specified network
        to a host with the given MAC address and hostname. Creates associated DNS
        records if requested.
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: IP assignment parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.AssignIpAddressParams'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully assigned IP address with details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters or malformed request body
        "500":
          description: Internal server error or IP assignment failed
      summary: Assign next available IP address
      tags:
      - IP Address Management
  /{account}/ips/{ip}:
    delete:
      description: Permanently deletes an IP address allocation from BlueCat, freeing
        it for reuse
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: IP address to delete
        format: ipv4
        in: path
        name: ip
        required: true
        type: string
      responses:
        "204":
          description: IP address successfully deleted
        "400":
          description: Invalid request parameters
        "403":
          description: Delete operation not allowed
        "404":
          description: IP address not found
        "409":
          description: Entity type mismatch
        "500":
          description: Internal server error
      summary: Delete IP address
      tags:
      - IP Address Management
    get:
      description: Retrieves detailed information about a specific IP address including
        its properties and allocation status
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: IP address
        format: ipv4
        in: path
        name: ip
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: IP address details
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters
        "404":
          description: IP address not found
        "500":
          description: Internal server error
      summary: Get IP address details
      tags:
      - IP Address Management
  /{account}/ips/cidrs:
    get:
      description: Retrieves the CIDR configuration file containing network ranges
        and allocation information
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: CIDR configuration data
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error or CIDR file not found
      summary: Get CIDR configuration
      tags:
      - IP Address Management
  /{account}/macs:
    post:
      consumes:
      - application/json
      description: Creates a new MAC address entry in BlueCat and associates it with
        the specified MAC pool
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: MAC address creation parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.MacParams'
      produces:
      - application/json
      responses:
        "200":
          description: Created MAC address object ID
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request parameters, MAC address format, or pool ID
        "409":
          description: MAC address already exists
        "500":
          description: Internal server error
      summary: Create MAC address
      tags:
      - MAC Address Management
  /{account}/macs/{mac}:
    get:
      description: Retrieves detailed information about a specific MAC address including
        its pool association and properties
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: MAC address in format XX:XX:XX:XX:XX:XX
        in: path
        name: mac
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: MAC address details
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters or MAC address format
        "404":
          description: MAC address not found
        "500":
          description: Internal server error
      summary: Get MAC address details
      tags:
      - MAC Address Management
    put:
      consumes:
      - application/json
      description: Updates the properties and pool association of an existing MAC
        address
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: MAC address to update in format XX:XX:XX:XX:XX:XX
        in: path
        name: mac
        required: true
        type: string
      - description: MAC address update parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.MacParams'
      responses:
        "204":
          description: MAC address successfully updated
        "400":
          description: Invalid request parameters, MAC address format, or pool ID
        "404":
          description: MAC address not found
        "500":
          description: Internal server error
      summary: Update MAC address
      tags:
      - MAC Address Management
  /{account}/networks:
    get:
      description: Retrieves a list of IPv4 networks from BlueCat based on a search
        hint with pagination support
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Search hint to filter networks (e.g., network name or IP range)
        in: query
        name: hint
        type: string
      - default: 0
        description: Number of records to skip for pagination
        in: query
        name: offset
        type: integer
      - default: 10
        description: Maximum number of records to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of network entities
          schema:
            items:
              $ref: '#/definitions/models.Entity'
            type: array
        "400":
          description: Invalid request parameters
        "500":
          description: Internal server error
      summary: Get networks by hint
      tags:
      - Network Management
  /{account}/networks/{id}:
    get:
      description: Retrieves detailed information about a specific IPv4 network using
        its unique identifier
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Network ID
        in: path
        name: id
        required: true
        type: integer
      - default: true
        description: Include high availability information
        in: query
        name: includeHA
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Network details
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters
        "404":
          description: Network not found
        "500":
          description: Internal server error
      summary: Get network by ID
      tags:
      - Network Management
  /{account}/records:
    get:
      description: Retrieves a list of DNS records filtered by record type with support
        for various search criteria and pagination
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: DNS record type
        enum:
        - HostRecord
        - AliasRecord
        - ExternalHostRecord
        in: query
        name: type
        required: true
        type: string
      - description: Search hint to filter records
        in: query
        name: hint
        type: string
      - description: Specific record name to search for
        in: query
        name: name
        type: string
      - description: Keyword to search within record names
        in: query
        name: keyword
        type: string
      - default: 0
        description: Number of records to skip for pagination
        in: query
        name: offset
        type: integer
      - default: 10
        description: Maximum number of records to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of DNS records
          schema:
            items:
              $ref: '#/definitions/models.Entity'
            type: array
        "400":
          description: Invalid request parameters or unsupported record type
        "404":
          description: No records found matching the criteria
        "500":
          description: Internal server error
      summary: Get DNS records by type
      tags:
      - DNS Record Management
    post:
      consumes:
      - application/json
      description: Creates a new DNS record in BlueCat. Supports HostRecord (A record),
        AliasRecord (CNAME), and ExternalHostRecord types
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: DNS record creation parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.CreateRecordParams'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created DNS record
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters, unsupported record type, or malformed
            request body
        "409":
          description: DNS record already exists
        "500":
          description: Internal server error
      summary: Create DNS record
      tags:
      - DNS Record Management
  /{account}/records/{id}:
    delete:
      description: Permanently deletes a DNS record from BlueCat using its unique
        identifier
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Record ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "204":
          description: DNS record successfully deleted
        "400":
          description: Invalid request parameters
        "403":
          description: Delete operation not allowed
        "404":
          description: DNS record not found
        "500":
          description: Internal server error
      summary: Delete DNS record by ID
      tags:
      - DNS Record Management
    get:
      description: Retrieves detailed information about a specific DNS record using
        its unique identifier
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Record ID
        in: path
        name: id
        required: true
        type: integer
      - default: true
        description: Include high availability information
        in: query
        name: includeHA
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: DNS record details
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters
        "404":
          description: DNS record not found
        "500":
          description: Internal server error
      summary: Get DNS record by ID
      tags:
      - DNS Record Management
  /{account}/search:
    get:
      description: Search for entities using flexible filters and type-specific criteria.
        Supports searching across IP blocks, networks, addresses, and DNS records
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Entity type to search for
        enum:
        - IP4Block IP4Network
        - IP4Address
        - GenericRecord
        - HostRecord
        in: query
        name: type
        required: true
        type: string
      - description: Search filters in format 'key1=value1|key2=value2'
        in: query
        name: filters
        required: true
        type: string
      - default: 0
        description: Number of records to skip for pagination
        in: query
        name: offset
        type: integer
      - default: 100
        description: Maximum number of records to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of matching entities
          schema:
            items:
              $ref: '#/definitions/models.Entity'
            type: array
        "400":
          description: Invalid request parameters or unsupported entity type
        "404":
          description: No entities found matching the search criteria
        "500":
          description: Internal server error
      summary: Custom entity search
      tags:
      - Entity Management
  /{account}/zones:
    get:
      description: Retrieves a list of DNS zones from BlueCat based on a search hint
        with pagination support
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Search hint to filter zones (e.g., zone name or domain)
        in: query
        name: hint
        type: string
      - default: 0
        description: Number of records to skip for pagination
        in: query
        name: offset
        type: integer
      - default: 10
        description: Maximum number of records to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of zone entities
          schema:
            items:
              $ref: '#/definitions/models.Entity'
            type: array
        "400":
          description: Invalid request parameters
        "500":
          description: Internal server error
      summary: Get DNS zones by hint
      tags:
      - Zone Management
  /{account}/zones/{id}:
    get:
      description: Retrieves detailed information about a specific DNS zone using
        its unique identifier
      parameters:
      - description: Account identifier
        in: path
        name: account
        required: true
        type: string
      - description: Zone ID
        in: path
        name: id
        required: true
        type: integer
      - default: true
        description: Include high availability information
        in: query
        name: includeHA
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Zone details
          schema:
            $ref: '#/definitions/models.Entity'
        "400":
          description: Invalid request parameters
        "404":
          description: Zone not found
        "500":
          description: Internal server error
      summary: Get DNS zone by ID
      tags:
      - Zone Management
  /ping:
    get:
      description: Performs a basic health check to verify the API is running
      produces:
      - application/json
      responses:
        "200":
          description: Returns 'pong' to indicate the service is healthy
      summary: Health check endpoint
      tags:
      - Health
  /systeminfo:
    get:
      description: Retrieves system information from the connected BlueCat instance
      produces:
      - application/json
      responses:
        "200":
          description: BlueCat system information as key-value pairs
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error if the request fails
      summary: Get BlueCat system information
      tags:
      - System
  /version:
    get:
      description: Returns version, build timestamp, and git commit information for
        the API
      produces:
      - application/json
      responses:
        "200":
          description: API version information
          schema:
            $ref: '#/definitions/api.apiVersion'
      summary: Get API version information
      tags:
      - General
securityDefinitions:
  ApiKeyAuth:
    description: Hashed token authentication that gets passed along with request.
    in: header
    name: X-Auth-Token
    type: apiKey
swagger: "2.0"
